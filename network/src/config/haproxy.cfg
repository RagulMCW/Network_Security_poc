global
    daemon
    maxconn 256
    stats socket /tmp/haproxy.sock mode 666 level admin

defaults
    mode http
    timeout connect 5000ms
    timeout client 50000ms
    timeout server 50000ms
    option httplog
    option dontlognull

# Statistics interface
frontend stats
    bind *:8404
    stats enable
    stats uri /stats
    stats refresh 5s
    stats show-node

# Main HTTP frontend
frontend http_front
    bind *:8080
    default_backend http_back

# Backend pointing to Flask app
backend http_back
    server flask1 127.0.0.1:5000 check
